<% include partials/_header %>

<style>
  .confirm-delete {
    color: #fff;
    background-color: #dc3545;
    border-color: #dc3545;
  }

  .confirm-delete:hover {
    color: #fff;
    background-color: #c82333;
    border-color: #bd2130;
  }

  .table-hover tbody tr:hover {
    background-color: #f5f5f5;
  }

  .btn-actions {
    display: flex;
    gap: 10px;
  }

  .btn-primary {
    color: #fff;
    background-color: #007bff;
    border-color: #007bff;
  }

  .btn-primary:hover {
    color: #fff;
    background-color: #0069d9;
    border-color: #0062cc;
  }
</style>

<div class="container mt-5">
  <div class="row">
    <div class="col-md-12 mx-auto">
      <h2 class="text-center mb-4">Gestión de Asignaturas</h2>
      <table class="table table-bordered table-hover shadow">
        <thead class="thead-dark">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Nombre de la Asignatura</th>
            <th scope="col">Descripción</th>
            <th scope="col">Grado</th>
            <th scope="col">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <% asignaturas.forEach((asignatura, index) => { %>
            <tr>
              <th scope="row"><%= index + 1 %></th>
              <td><%= asignatura.nombre %></td>
              <td><%= asignatura.descripcion %></td>
              <td><%= asignatura.grado %></td>
              <td class="btn-actions">
                <a href="/asignatura/<%= asignatura._id %>" class="btn btn-primary">Detalles</a>
                
                <form action="/eliminar_asignaturas/<%= asignatura._id %>" method="POST" onsubmit="return confirmDeletion('<%= asignatura.nombre %>');">
                  <button type="submit" class="btn confirm-delete">Eliminar</button>
                </form>
              </td>
            </tr>
          <% }); %>
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
  function confirmDeletion(asignaturaName) {
    var message = "Estás a punto de eliminar la asignatura \"" + asignaturaName + "\". Esta acción no se puede deshacer. ¿Deseas continuar?";
    return confirm(message);
  }
</script>

<% include partials/_footer %>
